<app-menu-bar [caseId]="caseId" [offerId]="offerId" [offerName]="offerName">
</app-menu-bar>

<div class="content">
  <div class="container">



    <div class="panel panel--compressed half-margin-top">
      <div class="row">
        <div class="col-sm-4" *ngIf="moduleName">
          <h4>
            {{moduleName}}</h4>
        </div>
        <div class="col-sm-8 text-right">
          <button class="btn btn--cool btn--secondary" (click)="goBackToOfferSetup()">
            <span class="icon-chevron-left"></span>&nbsp; Back to Offer Setup Workflow
          </button>
        </div>
      </div>
    </div>
    <div class="row half-margin-top">
      <div class="leftContent col-sm-12 col-md-9">
        <form name="form" #changeStatusForm="ngForm">

          <div class="row base-margin-top">
            <div *ngIf="showButton">
              <div class="col-md-12" *ngIf="showConnectNPIWSbutton" >
                <button class="btn btn--small btn--cool btn--primary" (click)="openNPIWS()">Submit OA Case In NPI Workspace
                  <span class="ico-punchout">
                  <svg width="21" height="15" viewBox="0 0 21 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <g clip-path="url(#clip0)">
                      <path d="M0 17.2978C0 11.6989 0 6.10874 0 0.509794C0.214724 0.114264 0.545757 0 0.993098 0C7.04116 0.00878955 13.0892 0.00878955 19.1373 0C19.5846 0 19.9156 0.123054 20.1304 0.509794C20.1304 6.10874 20.1304 11.6989 20.1304 17.2978C19.9156 17.6934 19.5757 17.8076 19.1373 17.8076C13.0892 17.7988 7.04116 17.7988 0.993098 17.8076C0.554704 17.8076 0.205777 17.6934 0 17.2978ZM18.6899 5.70442C18.4663 5.70442 18.2873 5.70442 18.1084 5.70442C13.9392 5.70442 9.76099 5.70442 5.59177 5.70442C4.90286 5.70442 4.68814 5.49347 4.67919 4.81668C4.67025 3.83225 4.67919 2.8566 4.67919 1.87217C4.67919 1.72275 4.6613 1.56454 4.65235 1.41512C3.55189 1.41512 2.49617 1.41512 1.45833 1.41512C1.45833 6.42516 1.45833 11.4088 1.45833 16.3837C7.22904 16.3837 12.955 16.3837 18.6899 16.3837C18.6899 12.824 18.6899 9.29935 18.6899 5.70442ZM9.34049 4.33325C9.34049 3.32245 9.34049 2.37318 9.34049 1.42391C8.24003 1.42391 7.17536 1.42391 6.11963 1.42391C6.11963 2.40834 6.11963 3.3664 6.11963 4.33325C7.2022 4.33325 8.25793 4.33325 9.34049 4.33325ZM14.0286 1.42391C12.9103 1.42391 11.8456 1.42391 10.7809 1.42391C10.7809 2.40834 10.7809 3.34882 10.7809 4.31567C11.8814 4.31567 12.955 4.31567 14.0286 4.31567C14.0286 3.33124 14.0286 2.38197 14.0286 1.42391ZM15.487 1.41512C15.487 2.40834 15.487 3.35761 15.487 4.33325C16.5695 4.33325 17.6163 4.33325 18.6899 4.33325C18.6899 3.34882 18.6899 2.39955 18.6899 1.41512C17.6163 1.41512 16.5695 1.41512 15.487 1.41512Z" fill="white"/>
                      <path d="M9.37627 11.7604C8.66947 11.7604 8.01636 11.7604 7.36324 11.7604C6.79959 11.7604 6.46856 11.4967 6.4775 11.0573C6.48645 10.6266 6.81748 10.3629 7.38113 10.3629C8.0253 10.3629 8.66053 10.3629 9.37627 10.3629C9.37627 9.79157 9.37627 9.24662 9.37627 8.69287C9.37627 8.51708 9.36733 8.34129 9.38522 8.1655C9.41206 7.80513 9.70731 7.54144 10.0652 7.54144C10.4231 7.54144 10.7272 7.79634 10.7451 8.1655C10.763 8.78077 10.7541 9.39604 10.7541 10.0113C10.7541 10.108 10.7541 10.2135 10.7541 10.3629C11.3267 10.3629 11.8545 10.3629 12.3914 10.3629C12.5524 10.3629 12.7224 10.3541 12.8834 10.3629C13.3666 10.3893 13.6707 10.6881 13.6529 11.1012C13.635 11.488 13.3218 11.7516 12.8566 11.7604C12.2035 11.7692 11.5504 11.7692 10.8883 11.7692C10.8614 11.7692 10.8346 11.7868 10.7541 11.822C10.7541 12.4548 10.7541 13.1052 10.7541 13.7644C10.7541 14.3006 10.4946 14.5819 10.0473 14.5731C9.62678 14.5643 9.39417 14.283 9.38522 13.7557C9.37627 13.1228 9.37627 12.4812 9.37627 11.7604Z" fill="white"/>
                      <rect x="15" y="1" width="5" height="4" fill="white"/>
                      <path d="M5.5 5H1" stroke="white" stroke-width="1.4"/>
                      </g>
                      <defs>
                      <clipPath id="clip0">
                      <rect width="20.1304" height="17.8076" fill="white"/>
                      </clipPath>
                      </defs>
                      </svg>
                  </span>
                </button>
              </div>
            </div>

            <div class="col-md-12 base-margin-top" *ngIf="!mStatus">
              <button class="btn btn--small btn--cool btn--primary" [disabled]="isReadOnly" (click)="markAsCompleteModal()">Mark as Complete</button>
            </div>


            <div class="col-md-9" *ngIf="mStatus && mStatus.status==='Complete'">
              <button type="button" class="btn btn--small btn--green-ghost btn--cool">
                <span class="icon-check-outline icon-small pull-left"></span>&nbsp;Complete&nbsp;&nbsp;&nbsp;</button>
            </div>
            <!--<span class="label label--success label--outlined"><span class="icon-check-outline icon-small"></span> succe2ss</span>
              -->
          </div>


          <div class="row base-margin-top">
            <div class="col-md-9">
              <div class="text-medium">If all required activities for {{moduleName}} are finished, press "Mark as
                Complete"</div>
              <br />
              <div class="text-medium"><a class="text-info" (click)="changemodalstatus()"><span
                class="icon-info-outline">&nbsp;</span>How do you know when I am complete with my activities?</a>
              </div>
              <app-share-modal [ishide]="ishide" (changestatus)="changemodalstatus()">
                <div modalheader>
                  <h1 class="modal__title text-xlarge">{{headerName}}</h1>
                </div>
                <div modalbody>
                  <!--{{infohelp}}-->
                  <div style="white-space: normal; text-align: left;" [innerHTML]="infohelp"></div>
                  <div *ngIf="isBtnNeeded">
                    <button class="btn btn--small btn--primary btn--cool" (click)="markAsComplete()"
                            (changestatus)="changemodalstatus()">Continue</button>
                  </div>
                </div>
              </app-share-modal>
            </div>

          </div>
          <div class="row base-margin-top">
            <div class="col-md-9">
              <div class="form-group">
                <div class="form-group__text">
                    <textarea id="input-hint-textarea" class="textarea" rows="5" class="form-control"
                              [(ngModel)]="cmnt.description" #description="ngModel" name="description" maxlength="1000">
                </textarea>
                  <label for="input-hint-textarea">Comments: <i>Optional</i> <span
                    style="color: red">&nbsp;&nbsp;({{1000-cmnt.description.length}} characters left)</span></label>
                </div>
              </div>
            </div>
          </div>
          <div class="row base-margin-top">
            <div class="col-md-7">
              <div *ngIf="show_Upload">
                <div *ngIf="moduleName === 'Royalty Setup'">
                  <p class="text-dkgray-1 text-medium">Attach your royalty checklist</p>
                  <app-upload-doc [moduleName]="moduleName" [isReadonly]="isReadOnly"  ></app-upload-doc>
                </div>
              </div>


            </div>
            <div class="col-md-5 text-left">
              <div class="help-block text-muted">
                    <span><button class="btn btn--small btn--primary btn--cool" (click)="saveComments()"
                                  [disabled]="cmnt.description.trim().length===0">Submit Comments</button></span>
              </div>
            </div>
          </div>


          <!--<div class="row base-margin-top">
            <div class="col-md-6">
              <ul class="list list--highlight" *ngIf="comments">
                <li *ngFor="let comment of comments">
                  <div class="panel panel--bordered">
                    <span class="icon-comment"></span>
                    <span>{{comment.createdBy}}</span>
                    <span>{{comment.timestamp | date:"MM/dd/yy"}}</span>
                  </div>
                  <div>
                    <span>{{comment.description}}</span>
                  </div>
                </li>
              </ul>
            </div>
          </div>-->

          <!-- <div class="col-md-4">
               <div class="card">
                   <div class="card__header">
                       <div class="card__subtitle">Card Subtitle</div>
                   </div>
                   <div class="card__body">Equidem recteque sea et. Per detracto iracundia ea, duo nusquam denique omittantur in.</div>
                   <div class="card__footer">
                       <a href="javascript:;">Link</a>
                       <a href="javascript:;" class="half-margin-left">Another Link</a>
                   </div>
               </div>
           </div>-->
          <br />
          <div class="row">
            <div class="col-md-9">
              <div class="panel panel--bordered panel-scroll" id="style-1" *ngIf="comments">
                <div class="panel panel--bordered-bottom" *ngFor="let comment of comments">
                  <div>
                    <span class="icon-comment message-box">&nbsp;</span>
                    <span>{{comment.createdBy}}&nbsp;&nbsp;</span><span>&nbsp;({{comment.userid}})&nbsp;&nbsp;</span>
                    <span>{{comment.timestamp | date:"d-MMM-y h:mm a"}}&nbsp;PST</span>
                  </div>
                  <div style="white-space:normal;word-break:break-all;padding-left:20px;">
                    <span class="text-small">{{comment.description}}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>



        </form>
      </div>
      <!-- right panel -->
      <div class="rightContent  col-sm-12 col-md-3">
        <app-right-panel [stakeData]="stakeholders" [offerName]="offerName" [derivedMM]="derivedMM"
                         [primaryBE]="primaryBE" [displayLeadTime]="displayLeadTime" [noOfWeeksDifference]="noOfWeeksDifference">
        </app-right-panel>
      </div>
    </div>
  </div>
</div>
