<!--turbo tax view-->
<div class="row" *ngIf="!phaseProcessingCompleted">
    <div class="loader">
        <div class="loading-dots loading-dots--info" aria-label="Loading, please wait...">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </div>
</div>
<div class="row text-xlarge text-center text-muted" *ngIf=" phaseProcessingCompleted && isOfferPhaseBlank">
    No Content Available
</div>
<div *ngIf="phaseProcessingCompleted && !isOfferPhaseBlank">
    <div class="row">
        <!-- Offer Phase widget -->
        <div class="col-md-12">
            <!-- <h5>Offer Name <small>ID 123</small></h5> -->
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2">
            <h4>{{offerId}}</h4>
            <h6>Offer Phase Details </h6>
        </div>
        <div class="col-sm-7">
            <div class="ui-steps ui-steps--success ui-steps--tiny turbo-mileStone">
                <div class="ui-step {{mileStoneStatus[0].status}}">
                    <div class="step__icon">
                        <span class="icon-check" *ngIf="mileStoneStatus[0].status === 'visited'"></span>
                        <span *ngIf="mileStoneStatus[0].status !== 'visited'">1</span>
                    </div>
                    <div class="step__label">Ideate</div>
                </div>
                <div class="ui-step {{mileStoneStatus[1].status}}">
                    <div class="step__icon">
                        <span class="icon-check" *ngIf="mileStoneStatus[1].status === 'visited'"></span>
                        <span *ngIf="mileStoneStatus[1].status !== 'visited'">2</span>
                    </div>
                    <div class="step__label">Plan</div>
                </div>
                <div class="ui-step {{mileStoneStatus[2].status}}">
                    <div class="step__icon">
                        <span class="icon-check" *ngIf="mileStoneStatus[2].status === 'visited'"></span>
                        <span *ngIf="mileStoneStatus[2].status !== 'visited'">3</span>
                    </div>
                    <div class="step__label">Execute</div>
                </div>
                <div class="ui-step {{mileStoneStatus[3].status}}">
                    <div class="step__icon">
                        <span class="icon-check" *ngIf="mileStoneStatus[3].status === 'visited'"></span>
                        <span *ngIf="mileStoneStatus[3].status !== 'visited'">4</span>
                    </div>
                    <div class="step__label">Launch</div>
                </div>

            </div>
        </div>
        <div class="col-sm-3">
        </div>
    </div>
    <div class="divider divider--compressed"></div>
</div>

<div class="row" *ngIf=" phaseProcessingCompleted && !isOfferPhaseBlank">
    <div class="col-md-12">
        <div>
            <table class="table table--compressed table--nostripes phase-popover half-margin-top">

                <thead>
                    <tr>
                        <th class="one-qtr-width"></th>
                        <th class="one-qtr-width">MILESTONE</th>
                        <th class="one-qtr-width">STATUS</th>
                        <th class="one-qtr-width">COMPLETION DATE</th>
                    </tr>
                </thead>

                <tbody *ngIf="offerPhaseDetailsList">

                    <tr>
                        <td class="panel--ltgray">
                            <span class="head text-large text-indigo">
                                Ideate<br>
                                <span class="text-small text-dkgray-1"> {{ideateCompletedCount}} of {{ideateCount}}
                                    Completed
                                </span>
                            </span>
                        </td>
                        <td colspan="3">
                            <div class="responsive-table">
                                <table #data class="table table--hover table--compressed table--nostripes">
                                    <tbody>

                                        <tr [class.innerrow]="ideateCount -1  > i  "
                                            *ngFor="let ideateData of offerPhaseDetailsList.ideate; let i = index">

                                            <td class="one-third-width">
                                                <div *ngIf="!ideateData.enable; else enableOfferPhase">
                                                    <span class="text-muted"
                                                        pTooltip="Dependent activities are not yet satisfied"
                                                        tooltipPosition="top"
                                                        tooltipStyleClass="hoverToolTip">{{ideateData.subMilestone}}</span>
                                                </div>
                                                <ng-template #enableOfferPhase>
                                                    <a><span style="color: #005073;"
                                                            (click)="gotobackTomilestone(ideateData.subMilestone)">{{ideateData.subMilestone}}</span></a>
                                                </ng-template>
                                            </td>

                                            <td class="one-third-width"
                                                [ngClass]="(ideateData.status == 'Completed')?'text-success':'text-warning'">
                                                {{ideateData.status}}</td>
                                            <td class="one-third-width">
                                                {{ideateData.completionDate | date:'dd-MMM-yyyy'}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </td>
                    </tr>
                    
                    <tr>
                        <td class="panel--ltgray">
                            <span class="head text-large text-indigo">Plan<br>
                                <span class="text-small text-dkgray-1"> {{planCompletedCount}} of {{planCount}}
                                    Completed
                                </span>
                            </span>
                        </td>
                        <td *ngIf="planCount > 1" colspan="3">
                            <div class="responsive-table">
                                <table #data class="table table--hover table--compressed table--nostripes">
                                    <tbody>
                                        <tr [class.innerrow]="planCount -1  > i  " class="innerrow"
                                            *ngFor="let ideateData of offerPhaseDetailsList.plan; let i = index">
                                            <td class="one-third-width">
                                                <div *ngIf="!ideateData.enable; else enableOfferPhase">
                                                    <span class="text-muted"
                                                        pTooltip="Dependent activities are not yet satisfied"
                                                        tooltipPosition="top">{{ideateData.subMilestone}}</span>
                                                </div>
                                                <ng-template #enableOfferPhase>
                                                    <a><span style="color: #005073;"
                                                            (click)="gotobackTomilestone(ideateData.subMilestone)">{{ideateData.subMilestone}}</span></a>
                                                </ng-template>
                                            </td>
                                            <td class="one-third-width"
                                                [ngClass]="(ideateData.status == 'Completed' || ideateData.status == 'Not Applicable')?'text-success':'text-warning'">
                                                {{ideateData.status}}</td>
                                            <td class="one-third-width">
                                                {{ideateData.completionDate | date:'dd-MMM-yyyy'}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </td>
                    </tr>

                    <!-- Uncomment below code for Sprint 5 -->
                    <!-- <tr>
                        <td class="panel--ltgray">
                            <span class="head text-large text-indigo">Execute<br>
                                <span class="text-small text-dkgray-1"> {{planCompletedCount}} of {{planCount}}
                                    Completed
                                </span>
                            </span>
                        </td>
                        <td *ngIf="executeCount > 1" colspan="3">
                            <div class="responsive-table">
                                <table #data class="table table--hover table--compressed table--nostripes">
                                    <tbody>
                                        <tr [class.innerrow]="executeCount -1  > i  " class="innerrow"
                                            *ngFor="let ideateData of offerPhaseDetailsList.execute; let i = index">
                                            <td class="one-third-width">
                                                <div *ngIf="!ideateData.enable; else enableOfferPhase">
                                                    <span class="text-muted"
                                                        pTooltip="Dependent activities are not yet satisfied"
                                                        tooltipPosition="top">{{ideateData.subMilestone}}</span>
                                                </div>
                                                <ng-template #enableOfferPhase>
                                                    <a><span style="color: #005073;"
                                                            (click)="gotobackTomilestone(ideateData.subMilestone)">{{ideateData.subMilestone}}</span></a>
                                                </ng-template>
                                            </td>
                                            <td class="one-third-width"
                                                [ngClass]="(ideateData.status == 'Completed' || ideateData.status == 'Not Applicable')?'text-success':'text-warning'">
                                                {{ideateData.status}}</td>
                                            <td class="one-third-width">
                                                {{ideateData.completionDate | date:'dd-MMM-yyyy'}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </td>
                    </tr> -->

                </tbody>
            </table>
        </div>
    </div>
</div>