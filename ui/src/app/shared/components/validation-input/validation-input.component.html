<div class="form-group"
     [class.form-group--error]="ngm && ngm.invalid && (form.submitted || ngm.touched || ngm.dirty)"
     [class.input--compressed]="compressed">

  <div class="form-group__text">

    <input *ngIf="!textarea" #input type="text"
           [id]="id"
           [name]="name"
           [placeholder]="placeholder"
           [disabled]="disabled"
           [autocomplete]="autocomplete"
           [autofocus]="autofocus"
           (input)="onInput()"
           (change)="onChange()"
           (blur)="onBlur()"
           (keyup)="onKeyup()"
    >

    <textarea *ngIf="textarea" #input
              [id]="id"
              [name]="name"
              [placeholder]="placeholder"
              [disabled]="disabled"
              [autofocus]="autofocus"
              [minLength]="minLength"
              [maxLength]="maxLength"
              [rows]="rows"
              [cols]="cols"
              (input)="onInput()"
              (change)="onChange()"
              (blur)="onBlur()"
              (keyup)="onKeyup()"
    ></textarea>

    <label>{{label}}</label>

  </div>
  <div class="help-block text-danger" role="alert">
    <div *ngFor="let v of validations">
      <span *ngIf="ngm.errors && ngm.errors[v.name] && v.message && (form.submitted || ngm.touched || ngm.dirty)">
        {{v.message}}</span>
    </div>
    <div *ngFor="let av of opts.asyncValidations">
      <span *ngIf="ngm.errors && ngm.errors[av.name] && av.message && (form.submitted || ngm.touched || ngm.dirty)">
        {{av.message}}</span>
    </div>
  </div>

  <ng-container *ngIf="debug">
    <div>form.valid: {{form?.valid}}</div>
    <div>valid: {{ngm?.valid}}</div>
    <div>touched: {{ngm?.touched}}</div>
    <div>dirty: {{ngm?.dirty}}</div>
    <div>model: {{model}}</div>
    <pre>errors: {{ngm?.errors|json}}</pre>
  </ng-container>
</div>
