<div class="form-group" [tabindex]="tabindex" (mouseover)="over = true" (mouseleave)="over = false" [ngClass]="{'input--compressed': compressed}">
	<div class="form-group__text">
		<input type="text" id="select-{{guid}}" autocomplete="off" [(ngModel)]="searchText" [placeholder]="placeholder" [disabled]="disabled" [required]="required" (mousedown)="toggleActive()" (keydown)="onKeydown($event)" (ngModelChange)="onSearch()" [ngClass]="{'input-size-compressed': compressed}" [attr.data-auto-id]="dataAutoId">
		<label *ngIf="label" for="select-{{guid}}">{{label}}</label>
		<span class="dropdown-chevron" [ngClass]="{'icon-chevron-down': !active, 'icon-chevron-up': active, 'has-label': label, 'disabled': disabled}" (mousedown)="toggleActive()" *ngIf="!empty || !model || !model.length"></span>
		<span class="icon-close" [ngClass]="{'has-label': label, 'disabled': disabled}" (mousedown)="clearModel()" *ngIf="empty && model && model.length"></span>
	</div>
	<div class="dropdown" [ngClass]="{'active': active}">
		<cui-vscroll-viewport itemSize="35"
			class="dropdown__menu"
			[ngStyle]="{ 'height': getDropdownHeight() }"
			*ngIf="active">
			<div *cuiVirtualFor="let item of flatItems; let i = index">
				<div class="dropdown__group-header" *ngIf="item.groupName">{{item.groupName}}</div>
				<div class="divider no-margin-top qtr-margin-bottom" *ngIf="item.groupName"></div>
				<a *ngIf="!item.groupName"
					(click)="item.selected = !item.selected; toggleSelectItem(item)"
					[ngClass]="{ 'keyboard-hover': !item.selected && item.hovered }"
					[title]="item[titleKey] || item[optionsKey]">
					<label class="checkbox" (click)="$event.preventDefault()">
						<input type="checkbox" [(ngModel)]="item.selected">
						<span class="checkbox__input"></span>
						<span class="checkbox__label">{{item[optionsKey]}}</span>
					</label>
				</a>
			</div>
		</cui-vscroll-viewport>
	</div>
</div>
